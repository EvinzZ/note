# redis进阶

## 持久化

redis是一个内存数据库，当redis服务器重启，或者电脑重启，数据会丢失，我们可以将redis内存中的数据，持久化保存到硬盘的文件中Redis 提供了两种持久化方法：RDB（默认）和 AOF

### RDB

默认方式，不需要进行配置，默认就是用这种机制

- 在指定的时间间隔内将内存中的数据集快照写入磁盘，也就是快照，它恢复时是将快照文件直接读到内存里。
- Redis会单独（Fork）创建一个子进程来进行持久化，会先将数据写入到整个过程中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的，这就确保了极高的性能。如果需要进行大规模数据的恢复，且对于数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的搞笑。RDB的缺点是最后一次持久化后的数据可能丢失。
- RDB保存的是dump.rdb文件

### AOF

以日志的形式来记录每个写操作，将Redis执行过得所有写指令记录下来（读操作不记录），只许追加文件但不可以改写文件，redis启动之初会读取该文件重新构建数据，换言之，redis重启的话就根据日志文件的内容将写指令从前到后执行一次以完成数据的恢复工作。

AOF保存的是appendonly.aof文件

